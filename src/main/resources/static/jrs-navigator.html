<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">

<title>Try it - JRS Navigator</title>
<meta content="" name="description">
<meta content="" name="keywords">

<!-- Favicons -->
<link href="assets/img/favicon.png" rel="icon">
<link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

<!-- Google Fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
	rel="stylesheet">

<!-- Vendor CSS Files -->
<link href="assets/vendor/bootstrap/css/bootstrap.min.css" 	rel="stylesheet">
<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" 	rel="stylesheet">
<!--  link href="assets/vendor/aos/aos.css" rel="stylesheet" -->
<link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
<link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
<link href="assets/vendor/glightbox/css/glightbox.min.css" 	rel="stylesheet">
<link rel="stylesheet" href="assets/vendor/font-awesome-4.7.0/css/font-awesome.min.css">

<!-- Template Main CSS File -->
<link href="assets/css/style.css" rel="stylesheet">
<link href="assets/css/jsonview.bundle.css" rel="stylesheet">

<!--  script src="assets/vendor/jquery/jquery-1.6.4.min.js"></script -->
<script src="assets/vendor/jquery/jquery-3.3.1.min.js"></script>
<script src="assets/js/ibmcode.js"></script>

<!-- =======================================================
  * Template Name: FlexStart - v1.4.0
  * Template URL: https://bootstrapmade.com/flexstart-bootstrap-startup-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
<style>
.sec-text {
	margin-left: 48px;
	margin-right: 48px;
}

th, td, input {
	font: 11px Verdana;
}

.note {
	background-color: #e7f3fe;
	border-left: 6px solid #2196F3;
	font-size: small;
}

.tryit-form {
	margin: 20px;
}

.col-form-label {
	padding-top: 0;
	margin-bottom: 0;
	font-size: inherit;
	line-height: 2;
}

/* The max width is dependant on the container */
.popover{
    max-width: 30%; /* Max Width of the popover (depending on the container!) */
}

/* CSS for generic JRS toggle */
.form-check-input {
  clear: left;
}

.form-switch {
    padding-left: 1.5em;
}

.form-check-label {
    padding-left: 0.25em;
}

.form-switch.form-switch-sm {
  margin-bottom: 0.5rem; /* JUST FOR STYLING PURPOSE */
}

.form-switch.form-switch-sm .form-check-input {
  height: 1rem;
  width: calc(1rem + 0.75rem);
  border-radius: 2rem;
}

.form-switch.form-switch-md {
  margin-bottom: 1rem; /* JUST FOR STYLING PURPOSE */
}

.form-switch.form-switch-md .form-check-input {
  height: 1.5rem;
  width: calc(2rem + 0.75rem);
  border-radius: 3rem;
}

.form-switch.form-switch-lg {
  margin-bottom: 1.5rem; /* JUST FOR STYLING PURPOSE */
}

.form-switch.form-switch-lg .form-check-input {
  height: 2rem;
  width: calc(3rem + 0.75rem);
  border-radius: 4rem;
}

.form-switch.form-switch-xl {
  margin-bottom: 2rem; /* JUST FOR STYLING PURPOSE */
}

.form-switch.form-switch-xl .form-check-input {
  height: 2.5rem;
  width: calc(4rem + 0.75rem);
  border-radius: 5rem;
}

@media only screen and (min-width: 800px) {
	.cptToggleFilters {
		display: none
	}
	.cptFilterForm {
		background: transparent;
		position: static;
		width: auto;
		left: auto;
		top: auto;
		bottom: auto;
		overflow: visible;
		display: block
	}
	ul.cpt-archive-filters {
		position: relative;
		z-index: 200;
		display: flex;
		list-style-type: none;
		margin: 0;
		padding-left: 0rem;
	}
	ul.cpt-archive-filters>li {
		list-style-type: none !important;
		position: relative;
		margin-right: 40px;
		font-size: .875rem
	}
	ul.cpt-archive-filters>li a {
		color: #454545
	}
	ul.cpt-archive-filters>li a span {
		color: #ababab
	}
	ul.cpt-archive-filters>li:last-child {
		margin-right: 0
	}
	ul.cpt-archive-filters>li .svg-icon {
		margin-left: 5px;
		display: inline-flex;
		align-self: center;
		position: relative;
		width: .5em;
		height: .5em
	}
	ul.cpt-archive-filters>li .svg-icon svg {
		width: .5em;
		height: .5em;
		fill: #333
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown {
		display: none;
		background: #fff;
		border: 1px solid #dfe3e6;
		z-index: 11;
		color:#555;
		-webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
		-moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
		box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1)
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown ul {
		margin: 0;
		padding: 15px;
		min-width: 100px
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown ul li {
		list-style-type: none;
		padding-right: 5px;
		position: relative
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown ul li label {
		cursor: pointer
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown.has__checkboxes ul li {
		padding-left: 25px
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown.has__checkboxes ul li input[type="checkbox"] {
		position: absolute;
		left: 0
	}
	ul.cpt-archive-filters>li .cpt-archive-filters__dropdown.has__checkboxes ul li input[type="radio"] {
		position: absolute;
		left: 0
	}
	ul.cpt-archive-filters>li:hover>a {
		color: #53b7b5
	}
	ul.cpt-archive-filters>li:hover .cpt-archive-filters__dropdown {
		display: flex;
		position: absolute;
		left: 0
	}
	ul.cpt-archive-filters>li x-ul {
		display: none;
		width: 300px;
		margin: 0;
		background: #fff;
		border: 1px solid #dfe3e6;
		-webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
		-moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
		box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1)
	}
	ul.cpt-archive-filters>li x-ul li {
		list-style-type: none
	}
}

.cpt-applied-filters {
	border-top: 1px solid #ebebeb;
	border-bottom: 1px solid #ebebeb;
	margin-bottom: 2vw
}

.cpt-applied-filters .cpt-applied-filters__wrap {
	padding: 1vw 0
}

.cpt-applied-filters .ao-opp {
	color: #ababab;
	font-size: .875rem;
	margin-right: 2px
}

.cpt-applied-filters .svg-icon {
	margin-left: 5px;
	display: inline-flex;
	align-self: center;
	position: relative;
	width: .5em;
	height: .5em
}

.cpt-applied-filters .svg-icon svg {
	width: .5em;
	height: .5em;
	fill: #333
}

.bx--tag--ibm {
    background-color: #c0e6ff;
    color: #325c80;
}

.bx--tag {
    font-family: "ibm-plex-sans", Helvetica Neue, Arial, sans-serif;
    font-size: 0.75rem;
    display: -webkit-inline-box;
    display: -webkit-inline-flex;
    display: inline-flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    align-items: center;
    padding: 0 0.5rem;
    height: 1.25rem;
    margin: 0.125rem;
    border-radius: 0.9375rem;
}

.bx--tag--clear-all {
    background-color: #f5bdbd;
    color: #a53725;
}

.bx--tag--apply {
    background-color: #005d5d;
    color: #ffffff;
}

</style>

<script>
	var apiCnt=0;
	var growthPlatformCd = 'x';
	var growthPlatformNm = 'x';
	var serviceLineCd = 'x';
	var serviceLineNm = 'x';
	var practiceCd = 'x';
	var practiceNm = 'x';
	var serviceAreaCd = 'x';
	var serviceAreaNm = 'x';
	var jobRoleGlobalArray=[];
	var jobRoleCd = 'x';
	var jobRoleNm = 'x';
	var specialtyGlobalArray=[];
	var specialtyCd = 'x';
	var specialtyNm = 'x';
	
	var filter = { "includeGenericJrss" : false, "bands" : [], "incentives" : [] };
	
	var allBands = ["01","02","03","04","05","06","07","08","09","10","b","c","d","te","tn"];
	var allIncentives = ["yes","no"];
	var lastFilterCookie = "";
	var lastAppliedFilterCookie = "";
	
	var helpStructure = [
		{"id":"tree-search",
			 "title": "JRS Collapsible Tree Search Help",
			 "context" : "/help/en/tree-search.html"
			} ,
			{"id":"basic",
			 "title": "Basic Search Help",
			 "context" : "/help/en/basic-search.html"
			} ,
			{"id":"adv",
			 "title": "Advanced Search Help",
			 "context" : "/help/en/advanced-search.html"
			} ,
			{"id":"regex",
			 "title": "Regular Expression Search Help",
			 "context" : "/help/en/reg-ex-search.html"
			},
			{"id": "jrs-navigator",
			 "title": "Job Role Specialty Navigator Help",
			 "context": "/help/en/jrs-navigator.html"},
			{"id": "jrs-navigator-next-steps",
			 "title": "Job Role Specialty Navigator Help",
			 "context": "/help/en/jrs-navigator-next-steps.html"}
		];
	
	var tree;
	
	
	function init() {
		
		/*
		 * Listener for information button.  When being shown, it retrieves the title
		 * and content for the information modal based on the key of the information 
		 * button selected.
		 */
		var informationModal = document.getElementById('id-info-modal')
		informationModal.addEventListener('show.bs.modal', function(event) {
			// Button that triggered the modal
			var button = event.relatedTarget
			// Extract info from data-bs-* attributes
			var contentId = button.getAttribute('data-bs-content')
			
			for (help of helpStructure) {
				if (help.id==contentId) break;
			}
			
			var modalTitle = informationModal.querySelector('.modal-title')
			let bodyDiv = document.getElementById('id-info-modal-body')

			modalTitle.textContent = help.title
			bodyDiv.innerHTML = '<div w3-include-html="'+help.context+'"></div>';
			/*make an HTTP request using the attribute value as the file name:*/
			xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
		        if (this.readyState == 4) {
		          if (this.status == 200) {bodyDiv.innerHTML = this.responseText;}
		          if (this.status == 404) {bodyDiv.innerHTML = "Page not found.";}
		        }
			}      
			xhttp.open("GET", window.location.protocol+"//"+window.location.host+help.context, true);
			xhttp.send();
		})
		
		      //put all of our archive js in here
		var $filterForm = document.getElementById('cptFilterForm');
		var $appliedFilters = document.getElementById('cpt-applied-filters');

		//Processes the form filters
		ibmcode.addEvent($filterForm, 'change', function() {
			//checkBandsFilter(); //cluge to select all and disable if all bands are cleared (no-filter=All Bands)
			//checkIncentivesFilter();
			
			$filtersSelected = document.querySelectorAll('#jrsFilters [type="checkbox"], #jrsFilters [type="radio"]');
			//$filtersSelected = document.querySelectorAll('#jrsFilters [type="checkbox"]');
					
            var filterCookie="";
            filter.bands = [];
            filter.incentives = [];
            filter.includeGenericJrss = false;
            [].forEach.call($filtersSelected, function(el) {
                if (!el.disabled && el.checked && !el.value.endsWith("-all")) {
                	if (el.value=="generic-include") {
               			filter.includeGenericJrss = true;
               			document.getElementById('filter-'+el.value).style.display = "inline-flex";
               			if (filterCookie.length>1) filterCookie = filterCookie +",";
                        filterCookie = filterCookie + el.value;
                	}
                	else if (el.value.startsWith("band-")) {
                        filter.bands.push(el.value.replace("band-",""));
                        if (filterCookie.length>1) filterCookie = filterCookie +",";
                        filterCookie = filterCookie + el.value.replace("band-","");
                    }
                    else {
                        filter.incentives.push(el.value.replace("incentive-",""));
                        if (filterCookie.length>1) filterCookie = filterCookie +",";
                        filterCookie = filterCookie + el.value;
                    }
                	if (!el.value.endsWith("-all"))
                    	document.getElementById('filter-'+el.value).style.display = "inline-flex";
                }
                else {
                    if (!el.value.endsWith("-all"))
                    	document.getElementById('filter-'+el.value).style.display = "none";
                }
                ;
            });
            if (filter.bands.length>0) document.getElementById('id-label-bands').style.display = "inline-flex";
            else document.getElementById('id-label-bands').style.display = "none";
            if (filter.incentives.length>0) document.getElementById('id-label-incentives').style.display = "inline-flex";
            else document.getElementById('id-label-incentives').style.display = "none";
            
            if (filter.includeGenericJrss || filter.bands.length>0 || filter.incentives.length>0) {
            	document.getElementById('filter-action-clear').style.display = "inline-flex";
            	document.getElementById('cpt-applied-filters').style.display = "block";
            }
            else {
            	document.getElementById('filter-action-clear').style.display = "none";
            	document.getElementById('cpt-applied-filters').style.display = "none";
            }

            if ( document.getElementById("job-role-table").innerHTML.length>0 ) { //&& filterCookie!=lastAppliedFilterCookie) {
            	//document.getElementById('filter-action-apply').style.display = "inline-flex";
            	practiceUpdated();
            }
            else document.getElementById('filter-action-apply').style.display = "none";
            
            lastFilterCookie = filterCookie;
		});
		
		/*
		* Called when someone clears or removes a filter pill from the applied filters area. 
		*   It finds the checkbox of the filter removed (or all checkboxes, if action-clear was selected) and unchecks
		*   the checkbox. Thereafter it create and dispatch a 'change' event to the filter form (cptFilterForm).  
		*   This will act like the user checked the option from the index.
		*/
		if ($appliedFilters) {
		    ibmcode.addEvent($appliedFilters, 'click', function(event) {
		        event = event || window.event;
		        if (event.target.tagName.toLowerCase() === 'a') {
		            //get the href value, and uncheck the corresponding filter
		            $bung = event.target.getAttribute("id").replace("filter-","");
		            if ($bung == "action-clear") {
		                $jamie = document.querySelectorAll('#jrsFilters [type="checkbox"]');
		                for (var j=0; j<$jamie.length; j++) {
		                    $jamie[j].checked = false;
		                }
		                $jamie = document.querySelectorAll('#jrsFilters [type="radio"][value="band-all"]');
		                $jamie[0].checked = true;
		            	$jamie = document.querySelectorAll('#jrsFilters [type="radio"][value="incentive-all"]');
		                $jamie[0].checked = true;
		                if (lastAppliedFilterCookie!='' &&  document.getElementById("job-role-table").innerHTML.length>0) {
		                    filter.bands = [];
		                    filter.incentives = [];
		                    filter.includeGenericJrss = false;
		                	practiceUpdated();
		                }
		            }
		            else if ($bung == "action-apply") {
		                //TO-DO Put logic here to apply the action
		                practiceUpdated();
		            	document.getElementById('filter-action-apply').style.display = "none";
		            }
		            else if ($bung == "generic-include") {
		            	$jamie = document.querySelectorAll('#jrsFilters [type="checkbox"][value="' + $bung + '"]');
		                $jamie[0].checked = false;
		            }
		            else {
		            	if ($bung.startsWith('band-'))
		            		$jamie = document.querySelectorAll('#jrsFilters [type="radio"][value="band-all"]');
		            	else 
		            		$jamie = document.querySelectorAll('#jrsFilters [type="radio"][value="incentive-all"]');
		                $jamie[0].checked = true;
		            }
		            event.preventDefault();
		            var newEvent = new Event('change');
		            $filterForm.dispatchEvent(newEvent);
		            // document.getElementById('cpt-archive-filter-control').click();
		        } else if (event.target.tagName.toLowerCase() === 'path' || event.target.tagName.toLowerCase() === 'svg') {
		            ibmcode.getClosest(event.target, 'a').click();
		        }
		    })
		}

		clear('growth-platform');
		clear('service-line');
		clear('practice');
		clear('service-area');
		
		const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/brands/10J00/growth-platforms'
		+ "?filters=GROWTH_PLATFORM_NM%20NOT%20LIKE%20'*(AUO)*' AND GROWTH_PLATFORM_CD%20!=%20'*(AUO)*'%20AND%20GROWTH_PLATFORM_CD%20<>%2715GEN%27"
		+ "&orderByCols=GROWTH_PLATFORM_NM";
	
		addToList('id_api_list',url);

		const request = new XMLHttpRequest();
		request.open('GET', url, true);

		request.onload = function() {
		  if (request.status === 200) {
			let  growthPlatformDd = document.getElementById('growth-platform-dropdown');
		    const data = JSON.parse(request.responseText);
		    let option;
		    option = document.createElement('option');
		    option.text = 'Choose a growth platform';
		    option.value = 'x';
		    growthPlatformDd.add(option);
		    
		    for (let i = 1; i < data.length; i++) {
		      option = document.createElement('option');
		      option.text = data[i].growthPlatformNm;
		      option.value = data[i].growthPlatformCd;
		      growthPlatformDd.add(option);
		    }
		    option = document.createElement('option');
		    option.text = data[0].growthPlatformNm;
		    option.value = data[0].growthPlatformCd;
		    growthPlatformDd.add(option);
		    
			//getTaxonomyFromUrl();
			
		   } else {
		    	// Reached the server, but it returned an error
			   console.error('An error occured ${request.status} - ${request.statusText}');
		  }   
		}

		request.onerror = function() {
		  console.error('An error occurred fetching the JSON from ' + url);
		};

		request.send();
	}
	
	function allIncentivesChange() {
		let allIncentivesElement = document.getElementById("cbx-incentive-all");

		for (const incentive of allIncentives) {
			element = document.getElementById("cbx-incentive-"+incentive);
			if (allIncentivesElement.checked) element.checked = true;
			element.disabled = allIncentivesElement.checked;
		}
	}
	
	function checkIncentivesFilter() {
		let allIncentivesElement = document.getElementById("cbx-incentive-all");

		for (const incentive of allIncentives) {
			element = document.getElementById("cbx-incentive-"+incentive);
			if (element.checked) return; 
		}
		document.getElementById("cbx-incentive-all").checked = true;
		allIncentivesChange();
	}
	
	function clear(key) {
		if (key=='service-area') {
			let keyText = document.getElementById(key+'-text');
			if (keyText!=null) keyText.innerHTML = '';
		}
		else if (key=='job-role') {
			let keyText = document.getElementById(key+'-text');
			if (keyText!=null) keyText.innerHTML = '';
			
			let jobRoleTable = document.getElementById(key+'-table');
			if (jobRoleTable!=null) jobRoleTable.innerHTML = '';
			
			//const jobRoleElement = document.getElementById('id-job-role');
			//if (jobRoleElement) jobRoleElement.innerHTML="";
		}
		else if (key=='specialty') {
			let keyText = document.getElementById(key+'-text');
			if (keyText!=null) keyText.innerHTML = '';
			
			let jobRoleTable = document.getElementById(key+'-table');
			if (jobRoleTable!=null) jobRoleTable.innerHTML = '';
		}
		else {
			let  keyDropDown = document.getElementById(key+'-dropdown');
			if (keyDropDown!=null) keyDropDown.length = 0;
		}
	}
	
	function growthPlatformUpdated() {
		let  growthPlatformDd = document.getElementById('growth-platform-dropdown');
		growthPlatformCd = growthPlatformDd.value;
		growthPlatformNm = $('#growth-platform-dropdown').find("option:selected").text();
		
		clear('service-line');
		clear('practice');
		clear('service-area');
		clear('job-role');
		clear('specialty');
		hideMsg();
		
		if (growthPlatformCd != 'x') {
			const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/growth-platforms/'+growthPlatformCd+'/service-lines'
			+"?filters=SERVICE_LINE_NM%20NOT%20LIKE%20'*(AUO)*'%20AND%20SERVICE_LINE_NM<>'Other'%20AND%20SERVICE_LINE_NM<>'SIH%20Solutioning' "
			+"AND%20SERVICE_LINE_NM<>'Hybrid%20Cloud%20Security'&orderByCols=SERVICE_LINE_NM";
			
			
			
			addToList('id_api_list',url);

			const request = new XMLHttpRequest();
			request.open('GET', url, true);

			request.onload = function() {
			  if (request.status === 200) {
				let  serviceLineDd = document.getElementById('service-line-dropdown');
			    //const respJson = JSON.parse(request.responseText);
			    //const data = respJson[0].children[0].children;
			    const data = JSON.parse(request.responseText);
			    let option;
			    option = document.createElement('option');
			    option.text = 'Choose a service line';
			    option.value = 'x';
			    serviceLineDd.add(option);
			    for (let i = 0; i < data.length; i++) {
			      option = document.createElement('option');
			      option.text = data[i].serviceLineNm;
			      option.value = data[i].serviceLineCd;
			      serviceLineDd.add(option);
			    }
			   } else {
			    	// Reached the server, but it returned an error
				   console.error('An error occured ${request.status} - ${request.statusText}');
			  }   
			}

			request.onerror = function() {
			  console.error('An error occurred fetching the JSON from ' + url);
			};

			request.send();
		}
	}
	
	function serviceLineUpdated() {
		let  serviceLineDd = document.getElementById('service-line-dropdown');
		serviceLineCd = serviceLineDd.value;
		serviceLineNm = $('#service-line-dropdown').find("option:selected").text();
		
		clear('practice');
		clear('service-area');
		clear('job-role');
		clear('specialty');
		hideMsg();
		
		if (growthPlatformCd != 'x') {
			const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/service-lines/'+serviceLineCd+'/practices'
			+ "?filters=PRACTICE_NM%20NOT%20LIKE%20'N%2FA%20-*'&orderByCols=PRACTICE_NM";
			
			addToList('id_api_list',url);

			const request = new XMLHttpRequest();
			request.open('GET', url, true);

			request.onload = function() {
			  if (request.status === 200) {
				let  practiceDd = document.getElementById('practice-dropdown');
			    //const respJson = JSON.parse(request.responseText);
			    //const data = respJson[0].children[0].children[0].children;
			    const data = JSON.parse(request.responseText);
			    let option;
			    option = document.createElement('option');
			    option.text = 'Choose a practice';
			    option.value = 'x';
			    practiceDd.add(option);
			    for (let i = 0; i < data.length; i++) {
			      option = document.createElement('option');
			      option.text = data[i].practiceNm;
			      option.value = data[i].practiceCd;
			      practiceDd.add(option);
			    }
			   } else {
			    	// Reached the server, but it returned an error
				   console.error('An error occured ${request.status} - ${request.statusText}');
			  }   
			}

			request.onerror = function() {
			  console.error('An error occurred fetching the JSON from ' + url);
			};

			request.send();
		}
	}	
	
	function practiceUpdated() {
		let  practiceDd = document.getElementById('practice-dropdown');
		practiceCd = practiceDd.value;
		practiceNm = $('#practice-dropdown').find("option:selected").text();
		jobRolePopulate(practiceCd, practiceNm);
	}
	
	function jobRolePopulate(practiceCd, practiceNm) {
		
		clear('service-area');
		clear('job-role');
		clear('specialty');
		hideMsg();
		
		if (practiceCd != 'x') {
			var url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/practices/'+practiceCd+'/job-roles';
			//?filters=CMPNSTN_GRD_LST%20LIKE%20'*05*'%20OR%20CMPNSTN_GRD_LST%20LIKE%20'*06*'
			if (filter.bands.length>0 || filter.incentives.length>0) {
				var urlFilter="";
				
				for (band of filter.bands) {
					if (urlFilter=="") urlFilter+="?filters=(";
					else urlFilter+="%20OR%20";
					
					urlFilter+="CMPNSTN_GRD_LST%20LIKE%20'*"+band.toUpperCase()+"*'";
				}
				
				if (urlFilter.length>1) urlFilter+=")";
				if (filter.incentives.length>0) {
					if (urlFilter=="") urlFilter+="?filters=";
					else urlFilter+="%20AND%20";
					urlFilter+="(";
					var cnt=0;
					for (incentive of filter.incentives) {
						if (cnt++>0) urlFilter+="%20OR%20";
						urlFilter+="INCENTIVE_FLG='"+incentive.charAt(0).toUpperCase()+"'";
					}
   					urlFilter+=")";	
				}
				url+=urlFilter;
			}
			
			addToList('id_api_list',url);
			
			lastAppliedFilterCookie = lastFilterCookie;
			
			api2JobRoleTable(url);
			
			/*
			*  Add a generic JRS switch
			const jobRoleElement = document.getElementById('id-job-role');
			
			var div = document.createElement("div");
			div.setAttribute("class","form-check form-switch form-switch-md");
			
			var input = document.createElement("input");
			input.setAttribute("class", "form-check-input");
			input.setAttribute("type", "checkbox");
			input.setAttribute("id", 'include-generics-id');
			input.setAttribute("onclick", 'genericSwithUpdated(this)');
			
			var label = document.createElement("label");
			label.setAttribute("class", "form-check-label");
			label.setAttribute("for", "include-generics-id");
			label.innerHTML = "Include generic Job Role and Job Role/Specialties";
			
			div.appendChild(input);
			div.appendChild(label);
			jobRoleElement.appendChild(div);
			*/
		}
	}
	
	function jobRoleUpdated(index, generic) {
		
		clear('specialty');
		hideMsg();
		
		jobRoleCd = jobRoleGlobalArray[index].jobRoleCd;
		jobRoleNm = jobRoleGlobalArray[index].jobRoleNm;
		
		let jobRoleTxt = document.getElementById('job-role-text');
		jobRoleTxt.innerHTML = jobRoleGlobalArray[index].jobRoleCd + " - "+jobRoleGlobalArray[index].jobRoleNm;
		
		if (jobRoleCd != 'x') {
			const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/practices/'+(generic?'generic':practiceCd)+'/job-roles/'+jobRoleCd+'/specialties';
			
			addToList('id_api_list',url);
			
			api2SpecialtiesTable(url);
		}
		
	}
	
	function specialtyUpdated(index) {
		
		specialtyCd = specialtyGlobalArray[index].specialtyCd;
		specialtyNm = specialtyGlobalArray[index].specialtyNm;
		
		let specialtyTxt = document.getElementById('specialty-text');
		specialtyTxt.innerHTML = specialtyGlobalArray[index].specialtyCd + " - "+specialtyGlobalArray[index].specialtyNm;
		
		if (specialtyCd != 'x') {
			//const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/jrss/'+jobRoleCd+'-'+specialtyCd+'/?includeParentage=true';
			const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/jrss/'+jobRoleCd+'-'+specialtyCd+'?includeParentage=true';
			
			addToList('id_api_list',url);

			const request = new XMLHttpRequest();
			request.open('GET', url, true);

			request.onload = function() {
			  if (request.status === 200) {
				//let  serviceAreaTxt = document.getElementById('service-area-text');
				const respJson = JSON.parse(request.responseText);
			    const data = respJson[0].children[0].children[0].children[0].children[0];
			    //serviceAreaTxt.innerHTML = data.serviceAreaCd + " - " + data.serviceAreaNm;
			    serviceAreaCd = data.serviceAreaCd;
			    serviceAreaNm = data.serviceAreaNm;
			    
				let uiMsg = document.getElementById("msg")
				let msgLine = document.getElementById("msg-line")
				uiMsg.innerHTML = ""
				msgLine.classList.remove('show'); 
		        let msg = "<h3 style=\"text-align:center;font-weight: bold;\">JRS Navigator Results</h3>"
		        	 + "<h5 style=\"font-weight: bold;\">JRS Alignment to Practice</h5>"
			         +"<ul><li><b>Brand: </b> IBM Consulting</li>"
			         + "<li><b>Growth Platform: </b> "+ growthPlatformNm + "</li>"
			         + "<li><b>Service Line: </b> "+ serviceLineNm + "</li>"
			         + "<li><b>Practice: </b> "+ practiceNm + "</li>"
			         + (serviceAreaNm.startsWith("N/A")?"":"<li><b>Service Area: </b> " + serviceAreaNm + "</li>")
			         + "<li><b>Job Role: </b> "+jobRoleCd + " - " + jobRoleNm + "</li>"
			         + "<li><b>Specialty: </b> "+specialtyCd + " - " + specialtyNm + "</li>"
			         + "</ul><hr/><p><center><b>Job Role Specialty: </b>"+jobRoleNm+": " + specialtyNm +"<br/>"
			         + "<b>Job Profile:</b> Applicable Band + Job Role (e.g., 07 "+jobRoleNm+")</center></p>"
			         + "<hr/><h5 style=\"font-weight: bold;\">What&apos;s Next?</h5>"
			         +'<p style="margin-top:20px;"><b>Before proceeding with the JRS update, consider the following:</b></p><ol>'
			         +'<li><b>Did you find what you needed?</b> If yes, that&apos;s great. If not, consult with your Manager, Practice Leader, or Workforce Staffing Professional (WSP).</li>'
			         +'<li><b>Is the employee in one of the Exclusion groups?</b> Check the list of Exclusions on the Manager Guidance tab. JRS changes for Exclusions should be submitted to a WSP. Do not make the change in Workday.</li>'
			         +'<li><b>Is the employee in EMEA or the India CiC?</b> Until further notice, JRS changes in these units will follow their business-as-usual process. Do not make the change in Workday.</li>'
			         +'<li><b>Is the Job Role changing?</b> If yes, the Job Profile will also change and this could trigger a change in Job Family, salary range, and compa-ratio. You can model the change in Workday to understand the implications and determine if additional discussions are needed.</li>'
			         +'<li><b>Is a Cost Center/Dept change needed?</b> If the new JRS is aligned to a different Practice, is it agreed that the employee is transferring/moving? Be sure to confirm those decisions and make the appropriate Cost Center/Dept updates.</li>'
			         +'</ol><p style="margin-top:20px;"><b>Ready to make the update? Follow this step-by-step Workday guidance:</b></p><ol>'
			         +'<li>JRS change is to the <b>Specialty only</b>. <a href="https://ibm.box.com/s/5k96imab01a875pd9voqleb56cf5a7pa" target="_blank">click here</a>.</li>'
			         +'<li>JRS change is to the <b>Job Role (and Specialty)</b>. This requires a change to the Job Profile before the JRS can be updated. <a href="https://ibm.box.com/s/3iv6s03mf0mgk3gjkhaj9068kbm8a3hr" target="_blank">click here</a></li>'			          
			         + "</ol>"
			         + '<p><button type="button" class="btn btn-success" data-dismiss="alert" onclick="hideMsg()">Close</button>'
			         ;
			         //<button type="button" class="btn " data-bs-toggle="modal" data-bs-target="#id-info-modal" data-bs-content="jrs-navigator-next-steps">Next steps &rarr;</button></p>';
			    uiMsg.innerHTML=msg;
			    msgLine.classList.remove('alert-warning');
				msgLine.classList.remove('alert-success'); 
				msgLine.classList.remove('alert-danger'); 
				msgLine.classList.remove('show');
				msgLine.classList.add('alert-success'); 
				msgLine.classList.add('show');

			   } else {
			    	// Reached the server, but it returned an error
				   console.error('An error occured ${request.status} - ${request.statusText}');
			  }   
			}

			request.onerror = function() {
			  console.error('An error occurred fetching the JSON from ' + url);
			};

			request.send();
		}
		
	}
	
	function api2JobRoleTable(url) {
		
	    var req = new XMLHttpRequest();
	    req.onreadystatechange = function() {
	         if (this.readyState == 4 && this.status == 200) {
	        	 createJobRoleTableFromJson(this.response);
	        	 
	        	 if (filter.includeGenericJrss) {
	        		var url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/practices/generic/job-roles';   
	    			if (filter.bands.length>0 || filter.incentives.length>0) {
	    				var urlFilter="";
	    				
	    				for (band of filter.bands) {
	    					if (urlFilter=="") urlFilter+="?filters=(";
	    					else urlFilter+="%20OR%20";
	    					
	    					urlFilter+="CMPNSTN_GRD_LST%20LIKE%20'*"+band.toUpperCase()+"*'";
	    				}
	    				if (urlFilter.length>1) urlFilter+=")";
	    				if (filter.incentives.length>0) {
	    					if (urlFilter=="") urlFilter+="?filters=";
	    					else urlFilter+="%20AND%20";
	    					urlFilter+="(";
	    					var cnt=0;
	    					for (incentive of filter.incentives) {
	    						if (cnt++>0) urlFilter+="%20OR%20";
	    						urlFilter+="INCENTIVE_FLG='"+incentive.charAt(0).toUpperCase()+"'";
	    					}
	       					urlFilter+=")";	
	    				}
	    				url+=urlFilter;
	    			}
	        		
	     			api3JobRoleTable(url);
	        	 }
	         }
	    };
	    req.open("GET", url, true);
	    req.setRequestHeader("Content-type", "application/json");
	    req.responseType = 'json';
	    req.send(null);
	}
	
	function api3JobRoleTable(url) {
		
	    var req = new XMLHttpRequest();
	    req.onreadystatechange = function() {
	         if (this.readyState == 4 && this.status == 200) {
	        	 appendJobRoleTableFromJson(this.response);
	         }
	    };
	    req.open("GET", url, true);
	    req.setRequestHeader("Content-type", "application/json");
	    req.responseType = 'json';
	    req.send(null);
	}
	
	function api2SpecialtiesTable(url) {
		
	    var req = new XMLHttpRequest();
	    req.onreadystatechange = function() {
	         if (this.readyState == 4 && this.status == 200) {
	        	 createSpecialtyTableFromJson(this.response);
	         }
	    };
	    req.open("GET", url, true);
	    req.setRequestHeader("Content-type", "application/json");
	    req.responseType = 'json';
	    req.send(null);
	}
	
	function createJobRoleTableFromJson(jobRoles) {

		// EXTRACT VALUE FOR HTML HEADER. 

		var colTemp = ['Select', 'Job Role Id', 'Job Role', 'Applicable Band(s)', 'Incentive Eligible', 'Description'];

		// CREATE DYNAMIC TABLE.
		var table = document.createElement("table");
		table.setAttribute("class","table table-hover table-sm table-striped");

		// CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.
		
		var thead = document.createElement("thead");

		var tr = document.createElement("tr");

		for (var i = 0; i < colTemp.length; i++) {
			var th = document.createElement("th"); // TABLE HEADER.
			th.innerHTML = colTemp[i];
			if (colTemp[i]=='Incentive Eligible') {
				var descSpan = document.createElement("span");
				descSpan.setAttribute("class", "d-inline-block");
				descSpan.setAttribute("tabindex", "0");
				descSpan.setAttribute("title", 'Incentive Eligible');
				descSpan.setAttribute("data-bs-toggle", "popover");
				descSpan.setAttribute("data-bs-trigger", "hover focus");
				descSpan.setAttribute("data-bs-content", "Incentive eligible JRSs should only be used for Practitioners on sales incentive plans.  Contact WFM to make a JRS change for any seller.  See Exclusions under Manager Guidance.");
				descSpan.setAttribute("id", "id-job-role-incentive");
				descSpan.setAttribute("style", "padding-left:3px;");
				
				//style="padding-left:3px;"
				
				new bootstrap.Popover(descSpan);
				
				var descIcon2 = document.createElement('i');
				descIcon2.setAttribute('class','fa fa-info-circle fa-lg');		
				descSpan.appendChild(descIcon2);
				
				th.appendChild(descSpan);
			}
			tr.appendChild(th);
		}
		thead.appendChild(tr);
		table.appendChild(thead);

		var tbody = document.createElement("tbody");
		tbody.setAttribute("id","id-job-role-table-body");
		
		//jobRoles = myJson[0].children;
		jobRoleGlobalArray = jobRoles;
		
		for (var i=0; i<jobRoles.length; i++) {
			//let jobRoleCd = jobRoles[i].jobRoleCd;
			tr = tbody.insertRow(-1);
			
			var x = document.createElement("input");
			x.setAttribute("value", i);
			x.setAttribute("id", 'job-role-'+i);
			x.setAttribute("name", 'job-role');
			x.setAttribute("type", 'radio');
			x.setAttribute("onclick", 'jobRoleUpdated(this.value, false)');

			var tabCell = tr.insertCell(-1);
			tabCell.appendChild(x);
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].jobRoleCd;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].jobRoleNm;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].cmpnstnGrdLst;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].incentiveFlg;
			
			tabCell = tr.insertCell(-1);
			var descSpan = document.createElement("span");
			descSpan.setAttribute("class", "d-inline-block");
			descSpan.setAttribute("tabindex", "0");
			descSpan.setAttribute("title", jobRoles[i].jobRoleCd + " : "+jobRoles[i].jobRoleNm);
			descSpan.setAttribute("data-bs-toggle", "popover");
			descSpan.setAttribute("data-bs-trigger", "hover focus");
			descSpan.setAttribute("data-bs-content", "Loading...");
			descSpan.setAttribute("data-bs-job-role-cd", jobRoles[i].jobRoleCd);
			descSpan.setAttribute("id", "id-"+jobRoles[i].jobRoleCd);
			
			new bootstrap.Popover(descSpan);
			
			descSpan.addEventListener('shown.bs.popover', function () {
				let jobRoleCd = $(this).attr('data-bs-job-role-cd');
				
				let dataBsContent = $(this).attr('data-bs-content');
				
				if (dataBsContent=='Loading...') {	
					const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/job-role-descriptions/'+jobRoleCd;
					
					addToList('id_api_list',url);
	
					const request = new XMLHttpRequest();
					request.open('GET', url, true);
	
					request.onload = function() {
					  if (request.status === 200) {
						  const respJson = JSON.parse(request.responseText);
						  
						  let popupEl = document.getElementById("id-"+respJson[0].jobRoleCd);
						  popupEl.setAttribute('data-bs-content',respJson[0].jobRoleDesc);
						  
						  var popover = bootstrap.Popover.getInstance(popupEl);

    					  // change the content
						  popover._config.content = respJson[0].jobRoleDesc;
						  popover.setContent();
					  }
					  else {
						  $(this).attr('data-bs-content','Could not retrieve job role description.');
					  }
					}
					
					request.onerror = function() {
						console.error('An error occurred fetching the JSON from ' + url);
						$(this).attr('data-bs-content','Could not retrieve job role description.');
					};
	
					request.send();
				}
				
			})
			
			const descIcon = document.createElement('i');
			descIcon.setAttribute('class','fa fa-commenting fa-lg');		
			descSpan.appendChild(descIcon);
			
			tabCell.appendChild(descSpan);
		}
		
		table.appendChild(tbody);

		// FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
		var jobRoleContainer = document.getElementById("job-role-table");
		jobRoleContainer.innerHTML = "";
		jobRoleContainer.appendChild(table);
	}	
	
	function appendJobRoleTableFromJson(jobRoles) {
		var tbody = document.getElementById("id-job-role-table-body");
		
		j = jobRoleGlobalArray.length;
		
		for (var i=0; i<jobRoles.length; i++) {
			jobRoleGlobalArray.push(jobRoles[i]);
			
			tr = tbody.insertRow(-1);
			
			var x = document.createElement("input");
			x.setAttribute("value", j+i);
			x.setAttribute("id", 'job-role-'+(j+i));
			x.setAttribute("name", 'job-role');
			x.setAttribute("type", 'radio');
			x.setAttribute("onclick", "jobRoleUpdated(this.value, true)");

			var tabCell = tr.insertCell(-1);
			tabCell.appendChild(x);
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].jobRoleCd+" <sup><b>(g)</b></sup>";
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].jobRoleNm+" <sup><b>(g)</b></sup>";
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].cmpnstnGrdLst;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = jobRoles[i].incentiveFlg;
			
			tabCell = tr.insertCell(-1);
			var descSpan = document.createElement("span");
			descSpan.setAttribute("class", "d-inline-block");
			descSpan.setAttribute("tabindex", "0");
			descSpan.setAttribute("title", jobRoles[i].jobRoleCd + " : "+jobRoles[i].jobRoleNm);
			descSpan.setAttribute("data-bs-toggle", "popover");
			descSpan.setAttribute("data-bs-trigger", "hover focus");
			descSpan.setAttribute("data-bs-content", "Loading...");
			descSpan.setAttribute("data-bs-job-role-cd", jobRoles[i].jobRoleCd);
			descSpan.setAttribute("id", "id-g-"+jobRoles[i].jobRoleCd);
			
			new bootstrap.Popover(descSpan);
			
			descSpan.addEventListener('shown.bs.popover', function () {
				let jobRoleCd = $(this).attr('data-bs-job-role-cd');
				
				let dataBsContent = $(this).attr('data-bs-content');
				
				if (dataBsContent=='Loading...') {				
					const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/job-role-descriptions/'+jobRoleCd;
					
					addToList('id_api_list',url);
	
					const request = new XMLHttpRequest();
					request.open('GET', url, true);
	
					request.onload = function() {
					  if (request.status === 200) {
						  const respJson = JSON.parse(request.responseText);
						  
						  let popupEl = document.getElementById("id-g-"+respJson[0].jobRoleCd);
						  popupEl.setAttribute('data-bs-content',respJson[0].jobRoleDesc);
						  
						  var popover = bootstrap.Popover.getInstance(popupEl);

    					  // change the content
						  popover._config.content = respJson[0].jobRoleDesc;
						  popover.setContent();
					  }
					  else {
						  $(this).attr('data-bs-content','Could not retrieve job role description.');
					  }
					}
					
					request.onerror = function() {
						console.error('An error occurred fetching the JSON from ' + url);
						$(this).attr('data-bs-content','Could not retrieve job role description.');
					};
	
					request.send();
				}
				
			})
			
			const descIcon = document.createElement('i');
			descIcon.setAttribute('class','fa fa-commenting fa-lg');		
			descSpan.appendChild(descIcon);
			
			tabCell.appendChild(descSpan);
		}
	}	
	
	function createSpecialtyTableFromJson(specialties) {

		// EXTRACT VALUE FOR HTML HEADER. 

		var colTemp = ['Select', 'Specialty Id', 'Specialty', 'Applicable Band(s)', 'Incentive Eligible', 'Description'];

		// CREATE DYNAMIC TABLE.
		var table = document.createElement("table");
		table.setAttribute("class","table table-hover table-sm table-striped");

		// CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.
		
		var thead = document.createElement("thead");

		var tr = document.createElement("tr");

		for (var i = 0; i < colTemp.length; i++) {
			var th = document.createElement("th"); // TABLE HEADER.
			th.innerHTML = colTemp[i];
			if (colTemp[i]=='Incentive Eligible') {
				var descSpan = document.createElement("span");
				descSpan.setAttribute("class", "d-inline-block");
				descSpan.setAttribute("tabindex", "0");
				descSpan.setAttribute("title", 'Incentive Eligible');
				descSpan.setAttribute("data-bs-toggle", "popover");
				descSpan.setAttribute("data-bs-trigger", "hover focus");
				descSpan.setAttribute("data-bs-content", "Incentive eligible JRSs should only be used for Practitioners on sales incentive plans.  Contact WFM to make a JRS change for any seller.  See Exclusions under Manager Guidance.");
				descSpan.setAttribute("id", "id-specialty-incentive");
				descSpan.setAttribute("style", "padding-left:3px;");
				
				//style="padding-left:3px;"
				
				new bootstrap.Popover(descSpan);
				
				var descIcon2 = document.createElement('i');
				descIcon2.setAttribute('class','fa fa-info-circle fa-lg');		
				descSpan.appendChild(descIcon2);
				
				th.appendChild(descSpan);
			}
			tr.appendChild(th);
		}
		thead.appendChild(tr);
		table.appendChild(thead);

		var tbody = document.createElement("tbody");
		
		specialtyGlobalArray = specialties;
		
		for (var i=0; i<specialties.length; i++) {
			tr = tbody.insertRow(-1);
			
			var x = document.createElement("input");
			x.setAttribute("value", i);
			x.setAttribute("id", 'specialty-'+i);
			x.setAttribute("name", 'specialty');
			x.setAttribute("type", 'radio');
			x.setAttribute("onclick", 'specialtyUpdated(this.value)');

			var tabCell = tr.insertCell(-1);
			tabCell.appendChild(x);
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = specialties[i].specialtyCd;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = specialties[i].specialtyNm;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = specialties[i].cmpnstnGrdLst;
			
			tabCell = tr.insertCell(-1);
			tabCell.innerHTML = specialties[i].incentiveFlg;
			
			tabCell = tr.insertCell(-1);
			var descSpan = document.createElement("span");
			descSpan.setAttribute("class", "d-inline-block");
			descSpan.setAttribute("tabindex", "0");
			descSpan.setAttribute("title", jobRoleCd+"-"+specialties[i].specialtyCd + " : "+jobRoleNm+"-"+specialties[i].specialtyNm);
			descSpan.setAttribute("data-bs-toggle", "popover");
			descSpan.setAttribute("data-bs-trigger", "hover focus");
			descSpan.setAttribute("data-bs-content", "Loading...");
			descSpan.setAttribute("data-bs-jrs-cd", jobRoleCd+"-"+specialties[i].specialtyCd);
			descSpan.setAttribute("id", "id-"+jobRoleCd+"-"+specialties[i].specialtyCd);
			
			new bootstrap.Popover(descSpan);
			
			descSpan.addEventListener('shown.bs.popover', function () {
				let jrsCd = $(this).attr('data-bs-jrs-cd');
				
				let dataBsContent = $(this).attr('data-bs-content');
				
				if (dataBsContent=='Loading...') {				
					const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/jrs-descriptions/'+jrsCd;
					
					addToList('id_api_list',url);
	
					const request = new XMLHttpRequest();
					request.open('GET', url, true);
	
					request.onload = function() {
					  if (request.status === 200) {
						  const respJson = JSON.parse(request.responseText);
						  
						  let popupEl = document.getElementById("id-"+respJson[0].jrsCd);
						  popupEl.setAttribute('data-bs-content',respJson[0].jrsDesc);
						  
						  var popover = bootstrap.Popover.getInstance(popupEl);

    					  // change the content
						  popover._config.content = respJson[0].jrsDesc;
						  popover.setContent();
					  }
					  else {
						  $(this).attr('data-bs-content','Could not retrieve job role description.');
					  }
					}
					
					request.onerror = function() {
						console.error('An error occurred fetching the JSON from ' + url);
						$(this).attr('data-bs-content','Could not retrieve job role description.');
					};
	
					request.send();
				}
				
			})
			
			const descIcon = document.createElement('i');
			descIcon.setAttribute('class','fa fa-commenting fa-lg');		
			descSpan.appendChild(descIcon);
			
			tabCell.appendChild(descSpan);			
		}
		
		table.appendChild(tbody);

		// FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
		var specialtyContainer = document.getElementById("specialty-table");
		specialtyContainer.innerHTML = "";
		specialtyContainer.appendChild(table);
	}
	
	function addToList(root, item) {

	}

	
	function getTaxonomyFromUrl() {

		let url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/jrss?includeParentage=true';
		addToList('id_api_list',url);
		
		let headers = new Headers();
		headers.append('Content-Type', 'application/json');
		headers.append('Accept', 'application/json');
		headers.append('Access-Control-Allow-Origin', 'http://localhost:8080');
		headers.append('Access-Control-Allow-Methods', 'GET, POST, OPTIONS')
		headers.append('Access-Control-Allow-Headers', 'Origin, Content-Type, Accept');

		fetch(url) //, { headers: headers })
			.then((res)=> {
				return res.text();
			})
			.then((data) => {
				skinnyJson = buildJrsTree(data);
				//console.log(skinnyJson);
				tree = JsonView.createTree(skinnyJson); //(data)
				rootElement = document.getElementById('root');
				rootElement.innerHTML="";
				JsonView.render(tree, rootElement);
			})
			.catch((err) => {
				console.log(err);
		})
	}
	
	function hideMsg() {
		let uiMsg = document.getElementById("msg")
		let msgLine = document.getElementById("msg-line")
		uiMsg.innerHTML = ""
		msgLine.classList.remove('show'); 
	}
	
	function genericSwithUpdated(includeGenericsSwitch) {
		if (includeGenericsSwitch.checked) {
			console.log("pull the generics and append them to the current table");
			//const url = window.location.protocol+"//"+window.location.host+'/api/v1/dyn/sql/wfm-bridge/a-tmp-generic-job-roles';
			const url = window.location.protocol+"//"+window.location.host+'/api/v1/eds-ut-jrs-tax/practices/generic/job-roles';
			
			addToList('id_api_list',url);
			
			api3JobRoleTable(url);
		}
		else {
			practiceUpdated();
		}
	}	
	
	function resetForm() {
		var gpDropdown = document.getElementById("growth-platform-dropdown")
		gpDropdown.value = 'x'
		growthPlatformUpdated()
	}
	
	//var doc = new jsPDF();
	var elementHTML = $('#jrs-summary').html();
	var specialElementHandlers = {
	    '#elementH': function (element, renderer) {
	        return true;
	    }
	};
	doc.fromHTML(elementHTML, 15, 15, {
	    'width': 170,
	    'elementHandlers': specialElementHandlers
	});

	// Save the PDF
	//doc.save('sample-document.pdf');
	
</script>
</head>

<body onload="javascript:init()">

<!-- could use modal-fullscreen or modal-xl -->
<div class="modal fade" id="id-info-modal" tabindex="-1" aria-labelledby="id-info-modalLabel" aria-hidden="true">
	<div class="modal-dialog  modal-fullscreen">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="id-info-modal-title">New message</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body" id="id-info-modal-body"></div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

  <main id="main">

    <!-- ======= Portfolio Details Section ======= -->
    <section id="portfolio-details" class="portfolio-details">
      <div>
        <div class="row">
          <div class="col-lg-12">
			<div >
				<div class="ss-form">

						<div class="form-group row">
							<div class="col-sm-9">
								<div id="jrsFilters" >
									<form method="GET" class="cptFilterForm" id="cptFilterForm" action="">
										<!--  
										<a class="btn btn-default" style="float:right;" href="" aria-label="jrs-navigator" data-bs-toggle="modal" data-bs-target="#id-info-modal" data-bs-content="jrs-navigator">
											<i class="fa fa-solid fa-info-circle fa-fw" style="color:blue;" title="JRS Navigator Help" aria-hidden="true"></i>
										</a>
										-->
										<ul class="cpt-archive-filters" id="cpt-archive-filters">
											<li>
												<i class="fa fa-filter fa-2xl" aria-hidden="true" title="Filters"></i> <b>Optional Filters:</b>
											</li>
						                    <li>
						                        <a href="#" id="cptType">
						                            Sector/Industry-aligned JRSs
						                            <span class="svg-icon">
						                                <svg width="10" height="5" viewBox="0 0 10 5" fill-rule="evenodd" style="">
						                                    <path d="M10 0L5 5 0 0z"></path>
						                                </svg>
						                            </span>
						                        </a>
						                        <div class="cpt-archive-filters__dropdown has__checkboxes">
						                            <ul>
						                                <li>
						                                    <label><input type="checkbox" value="generic-include" id="cbx-generic-include">Include</label>
						                                </li>				                                
						                            </ul>
						                        </div>
						                    </li>
						                    <li>
						                        <a href="#">
						                            Bands
						                            <span class="svg-icon">
						                                <svg width="10" height="5" viewBox="0 0 10 5" fill-rule="evenodd" style="">
						                                    <path d="M10 0L5 5 0 0z"></path>
						                                </svg>
						                            </span>
						                        </a>
						                        <div class="cpt-archive-filters__dropdown has__checkboxes">
						                            <ul>
						                            	<li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-all" id="cbx-band-all" checked>Any</label>
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-te" id="cbx-band-te">TE</label>
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-tn" id="cbx-band-tn">TN</label>
						                                </li>						                                
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-01" id="cbx-band-01">01</label>
						                                </li>		                                    
						                            </ul>
													<ul>
						                            	<li> 
						                            		&nbsp;
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-02" id="cbx-band-02">02</label>
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-03" id="cbx-band-03">03</label>
						                                </li>						                                
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-04" id="cbx-band-04">04</label>
						                                </li>		                                    
						                            </ul>
						                            <ul>
						                            	<li> &nbsp;
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-05" id="cbx-band-05">05</label>
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-06" id="cbx-band-06">06</label>
						                                </li>						                                
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-07" id="cbx-band-07">07</label>
						                                </li>		                                    
						                            </ul>
						                            <ul>
						                            	<li> &nbsp;
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-08" id="cbx-band-08">08</label>
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-09" id="cbx-band-09">09</label>
						                                </li>						                                
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-10" id="cbx-band-10">10</label>
						                                </li>	                                    
						                            </ul>
						                            <ul>
						                            	<li> &nbsp;
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-b" id="cbx-band-b">B</label>
						                                </li>
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-c" id="cbx-band-c">C</label>
						                                </li>							                                
						                                <li> 
						                                    <label><input name="bandRadioGroup" type="radio" value="band-d" id="cbx-band-d">D</label>
						                                </li>		                                    
						                            </ul>
						                        </div>
						                    </li>
						                    <li>
						                        <a href="#">
						                            Incentive Eligible JRSs
						                            <span class="svg-icon">
						                                <svg width="10" height="5" viewBox="0 0 10 5" fill-rule="evenodd" style="">
						                                    <path d="M10 0L5 5 0 0z"></path>
						                                </svg>
						                            </span>
						                        </a>
						                        <div class="cpt-archive-filters__dropdown has__checkboxes">
													<ul>
						                                <li> 
						                                    <label><input name="incentiveRadioGroup" type="radio" value="incentive-all" id="cbx-incentive-all" checked >Any</label>
						                                </li>	
						                                 <li> 
						                                    <label><input name="incentiveRadioGroup" type="radio" value="incentive-yes" id="cbx-incentive-yes" >Yes</label>
						                                </li>	
						                                <li> 
						                                    <label><input name="incentiveRadioGroup" type="radio" value="incentive-no" id="cbx-incentive-no" >No</label>
						                                </li>                                    
						                            </ul>
						                        </div>
						                    </li>
						                    <li style="display:none;"><a href="#" id="cpt-archive-filter-control">Filter View</a></li>
						                    <li><div style="float: right;">&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:resetForm()"><i class="fa fa-refresh fa-2xl" aria-hidden="true" title="Clear"></i> Clear form</a></div></li>
						                </ul> 	
  

					                </form>
				                </div>
				                <p/>
				                <div class="cpt-applied-filters" id="cpt-applied-filters" style="display: none;">
									<div class="cpt-applied-filters__wrap">
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-generic-include" style="display: none;">
							                Include Sector/Industry-aligned JRSs
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <span id="id-label-bands" style="display: none;">Bands: </span>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-01" style="display: none;">
							                01
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-02" style="display: none;">
							                02
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-03" style="display: none;">
							                03
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-04" style="display: none;">
							                04
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-05" style="display: none;">
							                05
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-06" style="display: none;">
							                06
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a><a href="#" class="bx--tag bx--tag--ibm" id="filter-band-07" style="display: none;">
							                07
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a><a href="#" class="bx--tag bx--tag--ibm" id="filter-band-08" style="display: none;">
							                08
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-09" style="display: none;">
							                09
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-10" style="display: none;">
							                10
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-b" style="display: none;">
							                B
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-c" style="display: none;">
							                C
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-d" style="display: none;">
							                D
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-te" style="display: none;">
							                TE
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-band-tn" style="display: none;">
							                TN
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							            <span id="id-label-incentives" style="display: none;">Incentives: </span>
							            <a href="#" class="bx--tag bx--tag--ibm" id="filter-incentive-yes" style="display: none;">
							                Yes
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							             <a href="#" class="bx--tag bx--tag--ibm" id="filter-incentive-no" style="display: none;">
							                No
							                <span class="svg-icon">
							                    <svg width="10" height="10" viewBox="0 0 10 10" fill-rule="evenodd">
							                        <path d="M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z">
							                        </path>
							                    </svg>
							                </span>
							            </a>
							           
							            <a href="#" class="bx--tag bx--tag--clear-all" id="filter-action-clear" style="display: none;">
											Clear all
										</a>
										<a href="#" class="bx--tag bx--tag--apply" id="filter-action-apply" style="display: none;">
											Apply
										</a>
										
							         </div>	
							    </div>  					
							</div>
						</div>
						<div class="row mt-3"></div>
						<div class="form-group row">
							<label for="growth-platform" class="col-sm-2 col-form-label"><b>Growth Platform</b></label>
							<div class="col-sm-7">
								<select id="growth-platform-dropdown" name="growth-platform"
											onchange="growthPlatformUpdated()" class="form-select"></select>
							</div>
						</div>
						<div class="row mt-3"></div>
						<div class="form-group row">
							<label for="service-line" class="col-sm-2 col-form-label"><b>Service Line</b></label>
							<div class="col-sm-7">
								<select id="service-line-dropdown" name="service-line"
											onchange="serviceLineUpdated()" class="form-select"></select>
							</div>
						</div>
						<div class="row mt-3"></div>
						<div class="form-group row">
							<label for="practice" class="col-sm-2 col-form-label"><b>Practice</b></label>
							<div class="col-sm-7">
								<select id="practice-dropdown" name="practice"
											onchange="practiceUpdated()" class="form-select"></select>
							</div>
						</div>
						<!--  
						<div class="row mt-2"></div>
						<div class="form-group row">
							<label for="service-area-text" class="col-sm-2 col-form-label"><b>Service Area</b></label>
							<div class="col-sm-7">
								<p id="service-area-text"></p>
							</div>
						</div>
						-->
						<div class="row mt-4"></div>
						<div class="form-group row">
							<label for="job-role-text" class="col-sm-2 col-form-label"><b>Job Role</b></label>
							<div class="col-sm-7">
								<div id="job-role-text"></div>               						
							</div>
						</div>
						<div class="form-group row">
							<div id="job-role-table" class="col-sm-9"></div>
						</div>
						<div class="row mt-3"></div>
						<div class="form-group row">
							<label for="specialty-text" class="col-sm-2 col-form-label"><b>Specialty</b></label>
							<div class="col-sm-7">
								<div id="specialty-text"></div>
							</div>
						</div>
						<div class="form-group row">
							<div id="specialty-table" class="col-sm-9"></div>
						</div>
						<div class="form-group row">
							<div class="col-sm-9">
								<div id="msg-line" class="alert alert-danger alert-dismissible fade">
									<button type="button" class="close" data-dismiss="alert" onclick="hideMsg()">&times;</button>
									<span id="msg"></span>
								</div>
							</div>
						</div>
						<!--
						<div class="form-group row">
							<div class="col-sm-9">
								<button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#id-info-modal" data-bs-content="jrs-navigator">Help</button>
							</div>
						</div>
						-->
				</div>
			</div>
          </div>
    
      </div>
    </section>
	<!-- End Portfolio Details Section -->

  </main>
<!-- End #main -->

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>


</body>
</html>